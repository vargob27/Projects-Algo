<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{user.first_name}}'s Profile</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<body>
    <a class="btn btn-info" href="/success">Home</a>
    <p>First Name: {{user.first_name}}</p>
    <p>Last Name: {{user.last_name}}</p>
    <p>Email Name: {{user.email}}</p>
    <p>Skill 1 : {{user.skill1}}</p>
    <p>Skill 2 : {{user.skill2}}</p>
    <p>Skill 3 : {{user.skill3}}</p>
    {% if userTickets %}
    <h1>Created Tickets</h1>
    <table class="table table-dark">
        <thead>
            <tr>
                <th>Task</th>
                <th>Description</th>
                <th>Hours</th>
                <th>Due Date</th>
                <th>Submitted By</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for task in userTickets %}
            <tr>
                <td><a href="/task/{{task.id}}">{{task.task_name}}</a></td>
                <td>{{task.description}}</td>
                <td>{{task.hours}}</td>
                <td>{{task.due}}</td>
                <td><a href="/user/{{task.creator.id}}">{{task.creator}}</a></td>
                <td><a href="/task/assign/{{task.id}}" class="btn btn-primary">ASSIGN</a> 
                    {% if user.id in task.assigned.id %}
                    <a href="/task/{{task.id}}/drop">Drop</a> 
                    {% endif %}
                    {% if user.id == task.creator.id %}
                    <a href="/{{task.id}}/delete" class="btn btn-danger">DELETE</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
    {% if assignedTasks %}
    <h1>Assigned Tickets</h1>
    <table class="table table-dark">
        <thead>
            <tr>
                <th>Task</th>
                <th>Description</th>
                <th>Hours</th>
                <th>Due Date</th>
                <th>Submitted By</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for task in assignedTasks %}
            <tr>
                <td><a href="/task/{{task.id}}">{{task.task_name}}</a></td>
                <td>{{task.description}}</td>
                <td>{{task.hours}}</td>
                <td>{{task.due}}</td>
                <td><a href="/user/{{task.creator.id}}">{{task.creator}}</a></td>
                <td><a href="/task/assign/{{task.id}}" class="btn btn-primary">ASSIGN</a> 
                    {% if user.id in task.assigned.id %}
                    <a href="/task/{{task.id}}/drop">Drop</a> 
                    {% endif %}
                    {% if user.id == task.creator.id %}
                    <a href="/{{task.id}}/delete" class="btn btn-danger">DELETE</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
    {% if user.id == loggedIn %}
    <a class="btn btn-warning" href="/user/edit/{{user.id}}">Edit Profile</a>
    {% endif %}
</body>

</html>